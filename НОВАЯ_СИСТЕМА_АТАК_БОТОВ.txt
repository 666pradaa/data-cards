═══════════════════════════════════════════════════════════════
  ✅ НОВАЯ СИСТЕМА АТАК ДЛЯ БОТОВ
═══════════════════════════════════════════════════════════════

Дата: Saturday, October 11, 2025
Версия: С визуализацией выбора цели

═══════════════════════════════════════════════════════════════
  🎮 ЧТО ИЗМЕНИЛОСЬ
═══════════════════════════════════════════════════════════════

РАНЬШЕ:
--------
1. startBotTurn() → performBotAttack()
2. Бот мгновенно выбирал карту и цель
3. Сразу начинал атаку
4. НЕ было визуализации выбора

ТЕПЕРЬ:
--------
1. startBotTurn()
   ↓ (0.8 сек - "думает")
2. selectBotAttacker()
   → Выбирает карту
   → Подсвечивает желтым 🟡
   → Показывает подсказку
   ↓ (0.8 сек - "выбирает цель")
3. selectBotTarget()
   → Выбирает цель
   → Подсвечивает красным 🔴
   → Показывает подсказку
   ↓ (0.8 сек - "готовится атаковать")
4. performBotMultipleAttacks()
   → Выполняет атаки
   → С учетом скорости карты

═══════════════════════════════════════════════════════════════
  🎯 ЭТАПЫ ХОДА БОТА
═══════════════════════════════════════════════════════════════

ЭТАП 1: НАЧАЛО ХОДА БОТА
--------------------------
Функция: startBotTurn()

Действия:
→ Показывает "Ход противника... Ожидайте"
→ Убирает все подсветки с карт
→ Помечает карту бота с кулдауном (⏳)
→ Блокирует клики игрока
→ Через 0.8 сек → selectBotAttacker()

Логи:
🤖 ХОД БОТА НАЧАЛСЯ
⏳ Карта бота с кулдауном: CardName

ЭТАП 2: ВЫБОР КАРТЫ БОТА
--------------------------
Функция: selectBotAttacker()

Действия:
→ Фильтрует доступные карты (без кулдауна)
→ Выбирает случайную карту
→ Подсвечивает карту желтым (selected)
→ Показывает "CardName атакует!"
→ Через 0.8 сек → selectBotTarget()

Логи:
🤖 Доступно карт бота: 3
🟡 Бот выбрал карту: CardName
✅ Карта бота подсвечена

ЭТАП 3: ВЫБОР ЦЕЛИ
--------------------
Функция: selectBotTarget()

Действия:
→ Выбирает случайную цель из живых карт игрока
→ Подсвечивает цель красным (target-available)
→ Показывает "CardName атакует TargetName!"
→ Через 0.8 сек → performBotMultipleAttacks()

Логи:
🎯 Бот выбирает цель из 3 карт
🔴 Бот выбрал цель: TargetName
✅ Цель подсвечена красным
⚔️ Бот выполнит 1 атак(и)

ЭТАП 4: ВЫПОЛНЕНИЕ АТАК
-------------------------
Функция: performBotMultipleAttacks()

Действия:
→ Убирает подсветку
→ Выполняет атаку (с учетом скорости)
→ Если цель умирает - переключается на другую
→ После всех атак: сохраняет lastBotCard
→ Увеличивает раунд
→ Через 0.5 сек → startPlayerTurn()

Логи:
⚔️ performBotMultipleAttacks: CardName → TargetName, 1 атак(и)
⚔️ Атака бота 1 из 1
💥 CardName наносит 50 урона TargetName
✅ Все атаки бота выполнены, сохраняем lastBotCard: CardName
📊 Раунд увеличен до: 2
👤 Переход к ходу игрока через 0.5 сек...

═══════════════════════════════════════════════════════════════
  ⏱️ ТАЙМЛАЙН ХОДА БОТА
═══════════════════════════════════════════════════════════════

0.0 сек → startBotTurn()
        → Показывает "Ход противника... Ожидайте"

0.8 сек → selectBotAttacker()
        → Подсвечивает карту бота 🟡
        → "CardName атакует!"

1.6 сек → selectBotTarget()
        → Подсвечивает цель 🔴
        → "CardName атакует TargetName!"

2.4 сек → performBotMultipleAttacks()
        → Атака 1

3.6 сек → Атака 2 (если скорость >= 20)

4.8 сек → Атака 3 (если скорость >= 30)

ИТОГО: ~2.4-6.0 секунд (в зависимости от скорости)

═══════════════════════════════════════════════════════════════
  🎨 ВИЗУАЛИЗАЦИЯ
═══════════════════════════════════════════════════════════════

ПОДСВЕТКИ:
-----------
🟡 .selected - карта бота которая атакует (желтая)
🔴 .target-available - цель атаки (красная)
⏳ .used-last-round - карта на кулдауне (серая с иконкой)

ПОДСКАЗКИ:
-----------
"Ход противника... Ожидайте"
"CardName атакует!" или "CardName (2 атаки) атакует!"
"CardName выбирает цель..."
"CardName атакует TargetName!"

БЛОКИРОВКА КЛИКОВ:
-------------------
→ Все карты: pointerEvents = 'none'
→ Все карты: cursor = ''
→ Все карты: onclick = null

═══════════════════════════════════════════════════════════════
  🔍 ЛОГИ В КОНСОЛИ (F12)
═══════════════════════════════════════════════════════════════

Полный ход бота выглядит так:

🤖 ХОД БОТА НАЧАЛСЯ
⏳ Карта бота с кулдауном: Pudge
🤖 Доступно карт бота: 2
🟡 Бот выбрал карту: Invoker
✅ Карта бота подсвечена
🎯 Бот выбирает цель из 3 карт
🔴 Бот выбрал цель: Anti-Mage
✅ Цель подсвечена красным
⚔️ Бот выполнит 1 атак(и)
⚔️ performBotMultipleAttacks: Invoker → Anti-Mage, 1 атак(и)
⚔️ Атака бота 1 из 1
💥 Invoker наносит 60 урона Anti-Mage
✅ Все атаки бота выполнены, сохраняем lastBotCard: Invoker
📊 Раунд увеличен до: 2
👤 Переход к ходу игрока через 0.5 сек...

═══════════════════════════════════════════════════════════════
  ⚙️ ПАРАЛЛЕЛИ С СИСТЕМОЙ ИГРОКА
═══════════════════════════════════════════════════════════════

ИГРОК:                          БОТ:
--------                        --------
startPlayerTurn()       →       startBotTurn()
showCardSelection()     →       selectBotAttacker()
(игрок кликает)         →       (авто-выбор)
selectPlayerAttacker()  →       (встроено в selectBotAttacker)
showTargetSelection()   →       selectBotTarget()
(игрок кликает)         →       (авто-выбор)
selectTarget()          →       (встроено в selectBotTarget)
performMultipleAttacks() →      performBotMultipleAttacks()

ОДИНАКОВАЯ ЛОГИКА:
-------------------
✅ Система кулдаунов (lastPlayerCard / lastBotCard)
✅ Множественные атаки от скорости
✅ Переключение цели если умирает
✅ Подробное логирование
✅ Визуальная обратная связь

РАЗНИЦА:
---------
❌ Игрок - ручной выбор (клики)
🤖 Бот - автоматический выбор (таймеры)

═══════════════════════════════════════════════════════════════
  📝 СПИСОК ИЗМЕНЕНИЙ В КОДЕ
═══════════════════════════════════════════════════════════════

game.js - ИЗМЕНЕНО:
--------------------

✅ startBotTurn()
   → Добавлено: логирование
   → Добавлено: очистка onclick и стилей
   → Изменено: setTimeout на selectBotAttacker (было performBotAttack)
   → Изменено: задержка 0.8 сек (было 0.5 сек)

✅ performBotAttack() - УДАЛЕНА ЛОГИКА
   → Теперь только перенаправляет на selectBotAttacker
   → Оставлена для обратной совместимости

✅ selectBotAttacker() - НОВАЯ ФУНКЦИЯ
   → Выбирает карту бота
   → Подсвечивает selected
   → Показывает подсказку
   → Вызывает selectBotTarget через 0.8 сек

✅ selectBotTarget() - НОВАЯ ФУНКЦИЯ
   → Выбирает цель
   → Подсвечивает target-available
   → Показывает подсказку
   → Вызывает performBotMultipleAttacks через 0.8 сек

✅ performBotMultipleAttacks()
   → Добавлено: подробное логирование
   → Добавлено: console.log каждой атаки
   → Добавлено: console.log раунда
   → Добавлено: console.log переключения цели

═══════════════════════════════════════════════════════════════
  🎮 КАК ТЕСТИРОВАТЬ
═══════════════════════════════════════════════════════════════

1. Обновите страницу (F5)

2. Откройте консоль (F12)

3. Начните бой против бота

4. После вашего хода смотрите в консоль:

   ДОЛЖНЫ УВИДЕТЬ:
   ----------------
   🤖 ХОД БОТА НАЧАЛСЯ
   🟡 Бот выбрал карту: ...
   🔴 Бот выбрал цель: ...
   ⚔️ Атака бота ...
   
   НА ЭКРАНЕ:
   -----------
   → Карта бота светится желтым 🟡
   → Ваша карта (цель) светится красным 🔴
   → Подсказка показывает кто кого атакует
   → Происходит атака
   → Переход к вашему ходу

5. Проверьте систему кулдаунов:
   → Карта бота которой он ходил помечена ⏳
   → Следующий ход он выберет ДРУГУЮ карту

═══════════════════════════════════════════════════════════════
  ✅ ПРЕИМУЩЕСТВА НОВОЙ СИСТЕМЫ
═══════════════════════════════════════════════════════════════

1. ВИЗУАЛИЗАЦИЯ
   → Игрок ВИДИТ что делает бот
   → Понятно какая карта атакует
   → Понятно какая цель выбрана

2. ПЛАВНОСТЬ
   → Нет мгновенных атак
   → Паузы между этапами
   → Время на осознание

3. ОБРАТНАЯ СВЯЗЬ
   → Подсказки на каждом этапе
   → Подсветки карт
   → Понятные сообщения

4. ОТЛАДКА
   → Подробные логи
   → Видно каждый шаг
   → Легко найти баги

5. ЕДИНООБРАЗИЕ
   → Бот работает как игрок
   → Одинаковая логика
   → Одинаковая визуализация

═══════════════════════════════════════════════════════════════
  🆚 СРАВНЕНИЕ СО СТАРОЙ СИСТЕМОЙ
═══════════════════════════════════════════════════════════════

СТАРАЯ СИСТЕМА:
----------------
✗ Бот мгновенно атаковал
✗ Не было визуализации выбора
✗ Непонятно что происходит
✗ Мало логов
✗ Разная логика с игроком

НОВАЯ СИСТЕМА:
---------------
✓ Бот выбирает карту (0.8 сек)
✓ Бот выбирает цель (0.8 сек)
✓ Подсветка карт
✓ Подробные логи
✓ Одинаковая логика с игроком
✓ Понятно что происходит
✓ Приятная анимация

═══════════════════════════════════════════════════════════════
  🔧 ДОПОЛНИТЕЛЬНО
═══════════════════════════════════════════════════════════════

РАБОТАЕТ ДЛЯ:
--------------
✅ Боев против ботов
✅ Онлайн-боев (когда противник ходит)
✅ Ранговых боев (когда добавим)

СОВМЕСТИМОСТЬ:
---------------
✅ Старые сохранения боев
✅ Firebase синхронизация
✅ localStorage режим
✅ Все типы карт и улучшений

ПРОИЗВОДИТЕЛЬНОСТЬ:
--------------------
✅ Нет лишних вычислений
✅ Оптимизированные селекторы
✅ Подсветки через CSS классы
✅ Минимум DOM манипуляций

═══════════════════════════════════════════════════════════════

🎮 ТЕПЕРЬ БОТ АТАКУЕТ КАК НАСТОЯЩИЙ ИГРОК!

Откройте консоль (F12) и начните бой!

═══════════════════════════════════════════════════════════════


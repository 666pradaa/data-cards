╔═══════════════════════════════════════════════════════════════════════════╗
║               🧪 ЧТО УЖЕ РАБОТАЕТ С FIREBASE - ТЕСТИРОВАНИЕ               ║
╚═══════════════════════════════════════════════════════════════════════════╝

✅ ПОЛНОСТЬЮ НА FIREBASE:
├─ 🔐 Авторизация (вход/регистрация/выход)
├─ 👤 Профиль (аватар, никнейм, ID)
├─ 🎁 Промокоды
├─ 🃏 Колода (добавление/удаление карт)
├─ 👥 Система друзей (поиск, запросы, добавление)
└─ 🔄 Real-time синхронизация

⚡ С АВТОСИНХРОНИЗАЦИЕЙ:
├─ 📦 Покупка кейсов
├─ ⭐ Применение улучшений
└─ ⚔️ Бои и награды

═══════════════════════════════════════════════════════════════════════════

╔═══════════════════════════════════════════════════════════════════════════╗
║                     ПЛАН ТЕСТИРОВАНИЯ                                     ║
╚═══════════════════════════════════════════════════════════════════════════╝

📋 ТЕСТ 1: ПРОВЕРКА ПОДКЛЮЧЕНИЯ
──────────────────────────────────────────────────────────────────────────
1. Откройте index.html в браузере
2. Нажмите F12 (Console)
3. Должно быть:
   ✅ Firebase успешно инициализирован!
   🎮 Режим работы: ☁️ Firebase
   🔄 Автоматическая синхронизация localStorage → Firebase активирована

❌ Если есть ошибки:
   - Проверьте firebase-config.js (все поля заполнены?)
   - Проверьте Firebase Console → Authentication (включен?)
   - Проверьте Realtime Database (создана?)

═══════════════════════════════════════════════════════════════════════════

📋 ТЕСТ 2: РЕГИСТРАЦИЯ
──────────────────────────────────────────────────────────────────────────
1. В игре нажмите "Регистрация"
2. Введите:
   Логин: test1
   Пароль: password123
3. Нажмите "Регистрация"
4. Должно: "Регистрация успешна!"

✅ Проверка в Firebase Console:
   1. Откройте https://console.firebase.google.com/
   2. Выберите проект "dota-cards"
   3. Authentication → Users
      👉 Должен появиться: test1@dotacards.local
   
   4. Realtime Database → Data
      👉 Должна быть структура:
         users/
           {некий-uid}/
             ├─ username: "test1"
             ├─ nickname: "Player..."
             ├─ gold: 300
             ├─ gems: 5
             └─ ...

═══════════════════════════════════════════════════════════════════════════

📋 ТЕСТ 3: ВХОД И СИНХРОНИЗАЦИЯ
──────────────────────────────────────────────────────────────────────────
1. Выйдите из игры (кнопка "Выйти")
2. Войдите снова:
   Логин: test1
   Пароль: password123
3. Должно: вход успешен, те же данные

✅ REAL-TIME ТЕСТ:
   1. Откройте игру в двух вкладках браузера
   2. Войдите под одним аккаунтом в обеих
   3. В первой вкладке используйте промокод FREE50
   4. 👉 Во второй вкладке золото обновится АВТОМАТИЧЕСКИ!

═══════════════════════════════════════════════════════════════════════════

📋 ТЕСТ 4: ПРОФИЛЬ
──────────────────────────────────────────────────────────────────────────
1. Перейдите во вкладку "Профиль"
2. Нажмите "Сменить аватар" → выберите любой
3. Нажмите ✎ рядом с никнеймом → введите новый
4. Нажмите "Сохранить"

✅ Проверка:
   Firebase Console → Realtime Database
   👉 Должны обновиться: avatar, nickname

═══════════════════════════════════════════════════════════════════════════

📋 ТЕСТ 5: ПРОМОКОДЫ
──────────────────────────────────────────────────────────────────────────
1. Вверху введите: FREE50
2. Нажмите "Использовать"
3. Должно: +50 🪙 и +5 💎

✅ Проверка:
   Firebase Console → Realtime Database → users/{uid}
   👉 gold увеличилось на 50
   👉 gems увеличилось на 5
   👉 usedCodes содержит "FREE50"

═══════════════════════════════════════════════════════════════════════════

📋 ТЕСТ 6: КОЛОДА
──────────────────────────────────────────────────────────────────────────
1. Перейдите во вкладку "Колода"
2. Выберите любую доступную карту
3. Нажмите "Добавить"
4. Карта должна появиться в слоте

✅ Проверка:
   Firebase Console → Realtime Database → users/{uid}/deck
   👉 Должен быть массив с названием карты

═══════════════════════════════════════════════════════════════════════════

📋 ТЕСТ 7: ДРУЗЬЯ
──────────────────────────────────────────────────────────────────────────
1. Зарегистрируйте второго пользователя:
   - Откройте игру в режиме инкогнито
   - Зарегистрируйтесь: test2 / password123

2. В первом аккаунте (test1):
   - Вкладка "Друзья" → "Поиск"
   - Введите: test2
   - Нажмите "Найти"
   - Нажмите "Добавить"

3. Во втором аккаунте (test2):
   - Вкладка "Друзья" → "Запросы"
   - Должен быть запрос от test1
   - Нажмите "Принять"

✅ Проверка:
   Firebase Console → Realtime Database
   👉 users/{uid-test1}/friends содержит uid-test2
   👉 users/{uid-test2}/friends содержит uid-test1

═══════════════════════════════════════════════════════════════════════════

📋 ТЕСТ 8: REAL-TIME СИНХРОНИЗАЦИЯ (ВАЖНО!)
──────────────────────────────────────────────────────────────────────────
1. Откройте игру в ДВУХ вкладках
2. Войдите под test1 в обеих
3. В первой вкладке:
   - Купите кейс
   - Добавьте карту в колоду
   - Используйте промокод
4. 👉 Во второй вкладке ВСЁ ОБНОВИТСЯ АВТОМАТИЧЕСКИ!

Это и есть МАГИЯ Firebase! 🔥

═══════════════════════════════════════════════════════════════════════════

📋 ТЕСТ 9: КЕЙСЫ И КАРТЫ
──────────────────────────────────────────────────────────────────────────
1. Перейдите во вкладку "Кейсы"
2. Купите "Обычный кейс" (100 🪙)
3. Должна выпасть карта с анимацией
4. Перейдите во вкладку "Карты"
5. 👉 Новая карта должна быть в коллекции

✅ Проверка:
   Firebase Console → Realtime Database → users/{uid}/cards
   👉 Новая карта с count: 1

═══════════════════════════════════════════════════════════════════════════

📋 ТЕСТ 10: БОЙ
──────────────────────────────────────────────────────────────────────────
1. Соберите колоду (3 карты) во вкладке "Колода"
2. Перейдите во вкладку "Бои"
3. Нажмите "Начать бой"
4. Выбирайте цели для атак
5. Победите (первый бой лёгкий!)
6. Получите награды: +25 🪙, +1 💎, +10 EXP

✅ Проверка:
   Firebase Console → Realtime Database → users/{uid}
   👉 gold, gems, experience обновились
   👉 battlesPlayed увеличился

═══════════════════════════════════════════════════════════════════════════

╔═══════════════════════════════════════════════════════════════════════════╗
║                    БЫСТРЫЙ ТЕСТ (1 МИНУТА)                                ║
╚═══════════════════════════════════════════════════════════════════════════╝

1. Откройте index.html
2. F12 → Console → ищите "Firebase успешно инициализирован!"
3. Зарегистрируйтесь (test1 / password123)
4. Откройте Firebase Console → проверьте что пользователь создан
5. Используйте промокод FREE50
6. Обновите Firebase Console → золото увеличилось!

🎉 РАБОТАЕТ? ПОЗДРАВЛЯЮ! ВСЁ НА FIREBASE!

═══════════════════════════════════════════════════════════════════════════

╔═══════════════════════════════════════════════════════════════════════════╗
║                    ЧТО СМОТРЕТЬ В FIREBASE CONSOLE                        ║
╚═══════════════════════════════════════════════════════════════════════════╝

📍 Authentication → Users
   Все зарегистрированные пользователи

📍 Realtime Database → Data → users
   Все данные пользователей в реальном времени

📍 Realtime Database → Rules
   Правила безопасности

📍 Usage (вкладка сверху)
   Статистика использования

═══════════════════════════════════════════════════════════════════════════

🐛 ЕСЛИ ЧТО-ТО НЕ РАБОТАЕТ:

❌ Ошибка "Permission denied"
   → Firebase Console → Realtime Database → Rules
   → Проверьте правила (должны быть как в инструкции)

❌ Ошибка "auth/invalid-email"
   → Authentication → Sign-in method
   → Email/Password должен быть включен

❌ Данные не сохраняются
   → F12 → Console → ищите красные ошибки
   → Проверьте что вы вошли под аккаунтом

❌ Real-time не работает
   → Проверьте что listener установлен (должно быть в консоли)
   → Попробуйте перезагрузить страницу

═══════════════════════════════════════════════════════════════════════════

💡 СОВЕТ: Держите открытыми ТРИ ОКНА:

1. 🖥️ Игра (index.html)
2. 🔧 Console (F12)
3. ☁️ Firebase Console

Так вы сразу увидите что происходит!

═══════════════════════════════════════════════════════════════════════════

🎯 ГЛАВНОЕ:

Игра ПОЛНОСТЬЮ работает с Firebase!
- ✅ Все данные в облаке
- ✅ Синхронизация в реальном времени
- ✅ Доступ с любого устройства
- ✅ Настоящая система друзей
- ✅ Защита от читов

НАЧНИТЕ ТЕСТИРОВАТЬ! 🚀

